<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI PULSE ‚Äî Actualit√©s IA en direct</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='12' fill='%231a1a18'/><text y='72' x='10' font-size='70' font-family='serif' font-weight='900' fill='%23c8102e'>P</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Playfair+Display:wght@700;900&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f2eb;
    --ink: #1a1a18;
    --ink-soft: #4a4a44;
    --ink-faint: #8a8880;
    --accent: #c8102e;
    --accent-soft: #f0d4d8;
    --border: #d0cdc4;
    --tag-bg: #e8e4da;
    --mono: 'IBM Plex Mono', monospace;
    --serif: 'Source Serif 4', Georgia, serif;
    --display: 'Playfair Display', Georgia, serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--ink);
    font-family: var(--serif);
    font-size: 15px;
    line-height: 1.65;
    min-height: 100vh;
  }

  /* MASTHEAD */
  .masthead {
    border-bottom: 3px double var(--ink);
    padding: 18px 0 12px;
    text-align: center;
    background: var(--bg);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .masthead-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    margin-bottom: 8px;
  }
  .dateline {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--ink-faint);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }
  .masthead h1 {
    font-family: var(--display);
    font-size: clamp(28px, 5vw, 52px);
    font-weight: 900;
    letter-spacing: -0.02em;
    line-height: 1;
    color: var(--ink);
  }
  .masthead h1 span { color: var(--accent); }
  .tagline {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--ink-soft);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-top: 4px;
  }
  .status-bar {
    border-top: 1px solid var(--border);
    margin-top: 10px;
    padding: 8px 24px 0;
    display: flex;
    align-items: center;
    gap: 16px;
    justify-content: center;
  }
  .live-dot {
    display: inline-block;
    width: 7px; height: 7px;
    background: var(--accent);
    border-radius: 50%;
    animation: pulse 1.5s ease-in-out infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.4; transform: scale(0.8); }
  }
  .status-text {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--ink-faint);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }
  .refresh-btn {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--accent);
    background: none;
    border: 1px solid var(--accent);
    padding: 3px 10px;
    cursor: pointer;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    transition: all 0.15s;
  }
  .refresh-btn:hover { background: var(--accent); color: white; }
  .refresh-btn:disabled { opacity: 0.4; cursor: not-allowed; }

  /* LAYOUT */
  .container { max-width: 680px; margin: 0 auto; padding: 0 16px 60px; }

  /* SEARCH */
  .search-bar { margin: 16px 0 0; display: flex; }
  .search-input {
    flex: 1;
    font-family: var(--mono);
    font-size: 11px;
    padding: 8px 12px;
    border: 1px solid var(--ink);
    background: white;
    color: var(--ink);
    outline: none;
    letter-spacing: 0.05em;
  }
  .search-input::placeholder { color: var(--ink-faint); }
  .search-btn {
    font-family: var(--mono);
    font-size: 10px;
    padding: 8px 14px;
    background: var(--ink);
    color: var(--bg);
    border: 1px solid var(--ink);
    cursor: pointer;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    transition: all 0.15s;
  }
  .search-btn:hover { background: var(--accent); border-color: var(--accent); }

  /* FEED */
  .feed { margin-top: 24px; }
  .feed-header {
    display: flex;
    align-items: baseline;
    gap: 10px;
    border-bottom: 2px solid var(--ink);
    padding-bottom: 6px;
    margin-bottom: 20px;
  }
  .feed-header h2 {
    font-family: var(--display);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }
  .feed-count { font-family: var(--mono); font-size: 10px; color: var(--ink-faint); }

  /* NEWS ITEM */
  .news-item {
    border-bottom: 1px solid var(--border);
    padding: 18px 0;
    opacity: 0;
    transform: translateY(6px);
    animation: fadeIn 0.3s ease forwards;
  }
  .news-item:nth-child(1) { animation-delay: 0.05s; }
  .news-item:nth-child(2) { animation-delay: 0.1s; }
  .news-item:nth-child(3) { animation-delay: 0.15s; }
  .news-item:nth-child(4) { animation-delay: 0.2s; }
  .news-item:nth-child(n+5) { animation-delay: 0.25s; }
  @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

  .news-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    margin-bottom: 8px;
  }
  .news-time { font-family: var(--mono); font-size: 10px; color: var(--ink-faint); }
  .news-source { font-family: var(--mono); font-size: 10px; color: var(--accent); font-weight: 600; text-transform: uppercase; }
  .news-tags { display: flex; gap: 4px; flex-wrap: wrap; margin-left: auto; }
  .tag {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    padding: 2px 7px;
    background: var(--tag-bg);
    color: var(--ink-soft);
    border: 1px solid var(--border);
  }
  .news-title {
    font-family: var(--display);
    font-size: 18px;
    font-weight: 700;
    line-height: 1.25;
    color: var(--ink);
    margin-bottom: 8px;
    letter-spacing: -0.01em;
  }
  .news-summary {
    font-family: var(--serif);
    font-size: 14px;
    color: var(--ink-soft);
    line-height: 1.7;
    font-style: italic;
    margin-bottom: 10px;
    border-left: 2px solid var(--accent-soft);
    padding-left: 12px;
  }
  .news-summary::before { content: '‚ñ∂ '; color: var(--accent); font-style: normal; font-size: 9px; }
  .news-link {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--ink-faint);
    text-decoration: none;
    letter-spacing: 0.05em;
    transition: color 0.15s;
  }
  .news-link:hover { color: var(--accent); }
  .ai-badge {
    font-family: var(--mono);
    font-size: 9px;
    background: var(--ink);
    color: var(--bg);
    padding: 1px 6px;
  }

  /* LOADING */
  .loading-state { text-align: center; padding: 60px 20px; }
  .loading-animation { display: inline-flex; gap: 6px; margin-bottom: 16px; }
  .loading-animation span {
    width: 6px; height: 6px;
    background: var(--ink);
    border-radius: 50%;
    animation: bounce 0.8s ease-in-out infinite;
  }
  .loading-animation span:nth-child(2) { animation-delay: 0.15s; }
  .loading-animation span:nth-child(3) { animation-delay: 0.3s; }
  @keyframes bounce {
    0%, 100% { transform: translateY(0); opacity: 0.3; }
    50% { transform: translateY(-6px); opacity: 1; }
  }
  .loading-text { font-family: var(--mono); font-size: 11px; color: var(--ink-faint); letter-spacing: 0.1em; text-transform: uppercase; }
  .loading-subtext { font-family: var(--serif); font-size: 13px; color: var(--ink-faint); font-style: italic; margin-top: 6px; }

  /* ERROR */
  .error-state { text-align: center; padding: 40px 20px; border: 1px solid var(--border); background: white; }
  .error-state p { font-family: var(--mono); font-size: 11px; color: var(--accent); margin-bottom: 8px; }
  .error-state small { font-family: var(--serif); font-size: 12px; color: var(--ink-faint); font-style: italic; }

  /* DIVIDER */
  .section-divider { text-align: center; margin: 4px 0; font-family: var(--mono); font-size: 10px; color: var(--ink-faint); letter-spacing: 0.3em; }

  /* FOOTER */
  .footer {
    margin-top: 40px;
    border-top: 3px double var(--ink);
    padding-top: 16px;
    text-align: center;
    font-family: var(--mono);
    font-size: 10px;
    color: var(--ink-faint);
    letter-spacing: 0.08em;
  }

  /* FILTERS */
  .filter-bar { display: flex; gap: 6px; flex-wrap: wrap; margin: 12px 0 0; }
  .filter-btn { font-family: var(--mono); font-size: 10px; padding: 4px 12px; background: none; border: 1px solid var(--border); color: var(--ink-soft); cursor: pointer; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.15s; }
  .filter-btn:hover { border-color: var(--ink); color: var(--ink); }
  .filter-btn.active { background: var(--ink); color: var(--bg); border-color: var(--ink); }
</style>
</head>
<body>

<header class="masthead">
  <div class="masthead-top">
    <div class="dateline" id="dateline"></div>
    <div></div>
    <div class="dateline">Vol. I ‚Äî √âdition Num√©rique</div>
  </div>
  <h1>AI <span>PULSE</span></h1>
  <div class="tagline">Toute l'actualit√© Intelligence Artificielle ‚Äî Propuls√© par Claude AI</div>
  <div class="status-bar">
    <span class="live-dot"></span>
    <span class="status-text" id="statusText">En attente</span>
    <button class="refresh-btn" id="refreshBtn" onclick="loadNews()">‚Üª Actualiser</button>
  </div>
</header>

<div class="container">
  <div class="search-bar">
    <input class="search-input" id="searchInput" type="text" placeholder="Rechercher un sujet IA... ex: GPT-5, robotique, open source" />
    <button class="search-btn" onclick="searchTopic()">Chercher</button>
  </div>


  <div class="filter-bar">
    <button class="filter-btn active" onclick="filterTag(this, null)">Tout</button>
    <button class="filter-btn" onclick="filterTag(this, 'Audiovisuel')">üé¨ Audiovisuel</button>
  </div>

  <div class="feed">
    <div class="feed-header">
      <h2>Fil d'actualit√©s</h2>
      <span class="feed-count" id="feedCount"></span>
    </div>
    <div id="feedContent">
      <div class="loading-state">
        <div class="loading-animation"><span></span><span></span><span></span></div>
        <div class="loading-text">Chargement des actualit√©s</div>
        <div class="loading-subtext">L'IA interroge les derni√®res nouvelles du monde...</div>
      </div>
    </div>
  </div>

  <div class="footer">
    <p>AI PULSE ‚Äî Aliment√© par Claude AI (Anthropic) + Web Search</p>
    <p style="margin-top:4px;">Les r√©sum√©s sont g√©n√©r√©s automatiquement par intelligence artificielle</p>
  </div>
</div>

<script>
  function setDateline() {
    const now = new Date();
    const opts = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('dateline').textContent = now.toLocaleDateString('fr-FR', opts).toUpperCase();
  }
  setDateline();

  async function fetchAINews(query = null) {
    // Calls our backend proxy, not Anthropic directly
    const response = await fetch('/api/news', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ query })
    });
    if (!response.ok) {
      const err = await response.json();
      throw new Error(err.error || `Erreur ${response.status}`);
    }
    const data = await response.json();
    return data.items || [];
  }

  function renderItems(items) {
    const feed = document.getElementById('feedContent');
    feed.innerHTML = '';
    document.getElementById('feedCount').textContent = `${items.length} articles`;

    items.forEach((item, i) => {
      const el = document.createElement('article');
      el.className = 'news-item';
      el.innerHTML = `
        <div class="news-meta">
          <span class="news-time">${item.time || "Aujourd'hui"}</span>
          <span>¬∑</span>
          <span class="news-source">${item.source || 'IA NEWS'}</span>
          <span class="ai-badge">AI</span>
          <div class="news-tags">
            ${(item.tags || []).map(t => `<span class="tag">${t}</span>`).join('')}
          </div>
        </div>
        <h3 class="news-title">${item.title}</h3>
        <p class="news-summary">${item.summary}</p>
        <a class="news-link" href="${item.url || '#'}" target="_blank" rel="noopener">‚Üó Lire la source compl√®te</a>
      `;
      feed.appendChild(el);

      if (i < items.length - 1 && i % 3 === 2) {
        const div = document.createElement('div');
        div.className = 'section-divider';
        div.textContent = '¬∑ ¬∑ ¬∑';
        feed.appendChild(div);
      }
    });
  }


  let allItems = [];

  const tagQueries = {
    'Audiovisuel': 'AI artificial intelligence film cinema Hollywood video generation Sora movie studio 2025',
    'LLM': 'large language model LLM GPT Claude Gemini Mistral release benchmark 2025',
    'Recherche': 'AI research paper breakthrough DeepMind OpenAI academic published 2025',
    'Startup': 'AI startup funding round investment unicorn launch 2025',
    'R√©glementation': 'AI regulation law EU act policy government ban 2025',
    'Robotique': 'AI robotics humanoid robot Boston Dynamics Figure Tesla Optimus 2025',
    'Open Source': 'open source AI model Llama Mistral Hugging Face release 2025'
  };

  function filterTag(btn, tag) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    if (!tag) {
      renderItems(allItems);
    } else {
      const q = tagQueries[tag] || tag;
      loadNews(q);
    }
  }

  async function loadNews(query = null) {
    const btn = document.getElementById('refreshBtn');
    const status = document.getElementById('statusText');
    const feed = document.getElementById('feedContent');

    btn.disabled = true;
    status.textContent = "Interrogation de l'IA...";
    document.getElementById('feedCount').textContent = '';

    feed.innerHTML = `
      <div class="loading-state">
        <div class="loading-animation"><span></span><span></span><span></span></div>
        <div class="loading-text">${query ? 'Recherche en cours' : 'Collecte des actualit√©s'}</div>
        <div class="loading-subtext">Claude AI analyse les derni√®res informations mondiales...</div>
      </div>`;

    try {
      const items = await fetchAINews(query);
      allItems = items;
      renderItems(items);
      const now = new Date();
      status.textContent = `Mis √† jour √† ${now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' })}`;
    } catch (err) {
      console.error(err);
      feed.innerHTML = `
        <div class="error-state">
          <p>‚ö† Impossible de charger les actualit√©s</p>
          <small>Erreur : ${err.message}</small>
        </div>`;
      status.textContent = 'Erreur de chargement';
    }

    btn.disabled = false;
  }

  function searchTopic() {
    const q = document.getElementById('searchInput').value.trim();
    if (q) loadNews(q);
  }

  document.getElementById('searchInput').addEventListener('keydown', e => {
    if (e.key === 'Enter') searchTopic();
  });

  loadNews();
  setInterval(() => loadNews(), 10 * 60 * 1000);
</script>
</body>
</html>
