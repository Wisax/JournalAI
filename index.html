<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI PULSE ‚Äî Actualit√©s IA en direct</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='12' fill='%230a0a0a'/><text y='72' x='8' font-size='70' font-family='serif' font-weight='900' fill='%23ff2d55'>P</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0a;
    --bg2: #111111;
    --bg3: #1a1a1a;
    --ink: #f0ede6;
    --ink-soft: #a0998e;
    --ink-faint: #4a4540;
    --accent: #ff2d55;
    --accent2: #ff9f0a;
    --border: #222222;
    --mono: 'DM Mono', monospace;
    --serif: 'DM Serif Display', Georgia, serif;
    --display: 'Bebas Neue', sans-serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  
  body {
    background: var(--bg);
    color: var(--ink);
    font-family: var(--serif);
    font-size: 15px;
    line-height: 1.65;
    min-height: 100vh;
  }

  /* NOISE OVERLAY */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
    opacity: 0.4;
  }

  /* MASTHEAD */
  .masthead {
    border-bottom: 1px solid var(--border);
    padding: 24px 0 16px;
    text-align: center;
    background: var(--bg);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .masthead::after {
    content: '';
    display: block;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
    margin-top: 16px;
  }
  .masthead-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 28px;
    margin-bottom: 10px;
  }
  .dateline {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--ink-faint);
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }
  .masthead h1 {
    font-family: var(--display);
    font-size: clamp(40px, 7vw, 72px);
    font-weight: 400;
    letter-spacing: 0.08em;
    line-height: 1;
    color: var(--ink);
  }
  .masthead h1 span { color: var(--accent); }
  .tagline {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--ink-faint);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    margin-top: 6px;
  }
  .status-bar {
    margin-top: 12px;
    display: flex;
    align-items: center;
    gap: 16px;
    justify-content: center;
  }
  .live-dot {
    display: inline-block;
    width: 6px; height: 6px;
    background: var(--accent);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--accent);
    animation: pulse 2s ease-in-out infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 8px var(--accent); }
    50% { opacity: 0.3; box-shadow: 0 0 2px var(--accent); }
  }
  .status-text {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--ink-faint);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }
  .refresh-btn {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--accent);
    background: none;
    border: 1px solid var(--accent);
    padding: 4px 12px;
    cursor: pointer;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    transition: all 0.2s;
  }
  .refresh-btn:hover { background: var(--accent); color: var(--bg); box-shadow: 0 0 16px rgba(255,45,85,0.4); }
  .refresh-btn:disabled { opacity: 0.3; cursor: not-allowed; }

  /* LAYOUT */
  .container { max-width: 720px; margin: 0 auto; padding: 0 20px 80px; position: relative; z-index: 1; }

  /* SEARCH */
  .search-bar { margin: 24px 0 0; display: flex; gap: 0; }
  .search-input {
    flex: 1;
    font-family: var(--mono);
    font-size: 11px;
    padding: 10px 16px;
    border: 1px solid var(--border);
    border-right: none;
    background: var(--bg2);
    color: var(--ink);
    outline: none;
    letter-spacing: 0.05em;
    transition: border-color 0.2s;
  }
  .search-input:focus { border-color: var(--accent); }
  .search-input::placeholder { color: var(--ink-faint); }
  .search-btn {
    font-family: var(--mono);
    font-size: 9px;
    padding: 10px 18px;
    background: var(--accent);
    color: white;
    border: 1px solid var(--accent);
    cursor: pointer;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    transition: all 0.2s;
  }
  .search-btn:hover { background: #e0002a; box-shadow: 0 0 20px rgba(255,45,85,0.3); }

  /* FILTERS */
  .filter-bar { display: flex; gap: 8px; margin: 14px 0 0; }
  .filter-btn {
    font-family: var(--mono);
    font-size: 9px;
    padding: 5px 14px;
    background: none;
    border: 1px solid var(--border);
    color: var(--ink-faint);
    cursor: pointer;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    transition: all 0.2s;
  }
  .filter-btn:hover { border-color: var(--ink-soft); color: var(--ink); }
  .filter-btn.active { background: var(--accent); color: white; border-color: var(--accent); box-shadow: 0 0 12px rgba(255,45,85,0.3); }

  /* FEED */
  .feed { margin-top: 32px; }
  .feed-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
  }
  .feed-header h2 {
    font-family: var(--mono);
    font-size: 9px;
    font-weight: 500;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--ink-faint);
  }
  .feed-header-line { flex: 1; height: 1px; background: var(--border); }
  .feed-count {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--ink-faint);
    background: var(--bg3);
    padding: 2px 8px;
    border: 1px solid var(--border);
  }

  /* NEWS ITEM */
  .news-item {
    border-bottom: 1px solid var(--border);
    padding: 24px 0;
    opacity: 0;
    transform: translateY(8px);
    animation: fadeIn 0.4s ease forwards;
    position: relative;
  }
  .news-item::before {
    content: '';
    position: absolute;
    left: -20px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: transparent;
    transition: background 0.2s;
  }
  .news-item:hover::before { background: var(--accent); }
  .news-item:nth-child(1) { animation-delay: 0.05s; }
  .news-item:nth-child(2) { animation-delay: 0.1s; }
  .news-item:nth-child(3) { animation-delay: 0.15s; }
  .news-item:nth-child(4) { animation-delay: 0.2s; }
  .news-item:nth-child(n+5) { animation-delay: 0.25s; }
  @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

  .news-meta {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 10px;
  }
  .news-time { font-family: var(--mono); font-size: 9px; color: var(--ink-faint); letter-spacing: 0.05em; }
  .news-source {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--accent2);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }
  .dot-sep { color: var(--ink-faint); font-size: 8px; }

  .news-title {
    font-family: var(--serif);
    font-size: 20px;
    font-weight: 400;
    line-height: 1.3;
    color: var(--ink);
    margin-bottom: 10px;
    letter-spacing: -0.01em;
    transition: color 0.2s;
  }
  .news-item:hover .news-title { color: white; }

  .news-summary {
    font-family: var(--mono);
    font-size: 12px;
    color: var(--ink-soft);
    line-height: 1.8;
    margin-bottom: 14px;
    padding-left: 12px;
    border-left: 2px solid var(--bg3);
  }

  .news-link {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--accent);
    text-decoration: none;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .news-link::after { content: '‚Üí'; transition: transform 0.2s; }
  .news-link:hover::after { transform: translateX(4px); }

  /* LOADING */
  .loading-state { text-align: center; padding: 80px 20px; }
  .loading-animation { display: inline-flex; gap: 8px; margin-bottom: 20px; }
  .loading-animation span {
    width: 4px; height: 4px;
    background: var(--accent);
    border-radius: 50%;
    animation: bounce 0.9s ease-in-out infinite;
    box-shadow: 0 0 6px var(--accent);
  }
  .loading-animation span:nth-child(2) { animation-delay: 0.2s; background: var(--accent2); box-shadow: 0 0 6px var(--accent2); }
  .loading-animation span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes bounce {
    0%, 100% { transform: translateY(0); opacity: 0.2; }
    50% { transform: translateY(-8px); opacity: 1; }
  }
  .loading-text { font-family: var(--display); font-size: 18px; color: var(--ink-soft); letter-spacing: 0.1em; }
  .loading-subtext { font-family: var(--mono); font-size: 10px; color: var(--ink-faint); margin-top: 8px; letter-spacing: 0.08em; }

  /* ERROR */
  .error-state { text-align: center; padding: 60px 20px; border: 1px solid var(--border); background: var(--bg2); }
  .error-state p { font-family: var(--mono); font-size: 11px; color: var(--accent); margin-bottom: 8px; letter-spacing: 0.05em; }
  .error-state small { font-family: var(--mono); font-size: 10px; color: var(--ink-faint); }

  /* DIVIDER */
  .section-divider {
    text-align: center;
    margin: 8px 0;
    font-family: var(--mono);
    font-size: 9px;
    color: var(--ink-faint);
    letter-spacing: 0.4em;
  }

  /* FOOTER */
  .footer {
    margin-top: 60px;
    padding-top: 20px;
    text-align: center;
    border-top: 1px solid var(--border);
    font-family: var(--mono);
    font-size: 9px;
    color: var(--ink-faint);
    letter-spacing: 0.1em;
  }
  .footer-logo {
    font-family: var(--display);
    font-size: 22px;
    letter-spacing: 0.1em;
    color: var(--ink-faint);
    margin-bottom: 8px;
  }
  .footer-logo span { color: var(--accent); opacity: 0.4; }
</style>
</head>
<body>

<header class="masthead">
  <div class="masthead-top">
    <div class="dateline" id="dateline"></div>
    <div></div>
    <div class="dateline">√âdition Quotidienne</div>
  </div>
  <h1>AI <span>PULSE</span></h1>
  <div class="tagline">Toute l'actualit√© intelligence artificielle</div>
  <div class="status-bar">
    <span class="live-dot"></span>
    <span class="status-text" id="statusText">En attente</span>
    <button class="refresh-btn" id="refreshBtn" onclick="loadNews()">‚Üª Actualiser</button>
  </div>
</header>

<div class="container">
  <div class="search-bar">
    <input class="search-input" id="searchInput" type="text" placeholder="Rechercher... GPT-5, robotique, Sora..." />
    <button class="search-btn" onclick="searchTopic()">Chercher</button>
  </div>

  <div class="filter-bar">
    <button class="filter-btn active" onclick="filterTag(this, null)">Tout</button>
    <button class="filter-btn" onclick="filterTag(this, 'Audiovisuel')">üé¨ Audiovisuel</button>
  </div>

  <div class="feed">
    <div class="feed-header">
      <h2>Fil d'actualit√©s</h2>
      <div class="feed-header-line"></div>
      <span class="feed-count" id="feedCount"></span>
    </div>
    <div id="feedContent">
      <div class="loading-state">
        <div class="loading-animation"><span></span><span></span><span></span></div>
        <div class="loading-text">Chargement</div>
        <div class="loading-subtext">Scan des derni√®res actualit√©s IA...</div>
      </div>
    </div>
  </div>

  <div class="footer">
    <div class="footer-logo">AI <span>PULSE</span></div>
    
  </div>
</div>

<script>
  function setDateline() {
    const now = new Date();
    const opts = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('dateline').textContent = now.toLocaleDateString('fr-FR', opts).toUpperCase();
  }
  setDateline();

  async function fetchAINews(query = null) {
    const response = await fetch('/api/news', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ query })
    });
    if (!response.ok) {
      const err = await response.json();
      throw new Error(err.error || `Erreur ${response.status}`);
    }
    const data = await response.json();
    return data.items || [];
  }

  function renderItems(items) {
    const feed = document.getElementById('feedContent');
    feed.innerHTML = '';
    document.getElementById('feedCount').textContent = `${items.length} articles`;

    items.forEach((item, i) => {
      const el = document.createElement('article');
      el.className = 'news-item';
      el.innerHTML = `
        <div class="news-meta">
          <span class="news-time">${item.time || "Aujourd'hui"}</span>
          <span class="dot-sep">¬∑</span>
          <span class="news-source">${item.source || 'IA NEWS'}</span>
        </div>
        <h3 class="news-title">${item.title}</h3>
        <p class="news-summary">${item.summary}</p>
        <a class="news-link" href="${item.url || '#'}" target="_blank" rel="noopener">Lire la source</a>
      `;
      feed.appendChild(el);

      if (i < items.length - 1 && i % 3 === 2) {
        const div = document.createElement('div');
        div.className = 'section-divider';
        div.textContent = '¬∑ ¬∑ ¬∑';
        feed.appendChild(div);
      }
    });
  }

  let allItems = [];

  const tagQueries = {
    'Audiovisuel': 'AI artificial intelligence film cinema Hollywood video generation Sora movie studio 2025'
  };

  function filterTag(btn, tag) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    if (!tag) {
      renderItems(allItems);
    } else {
      const q = tagQueries[tag] || tag;
      loadNews(q);
    }
  }

  async function loadNews(query = null) {
    const btn = document.getElementById('refreshBtn');
    const status = document.getElementById('statusText');
    const feed = document.getElementById('feedContent');

    btn.disabled = true;
    status.textContent = "Chargement...";
    document.getElementById('feedCount').textContent = '';

    feed.innerHTML = `
      <div class="loading-state">
        <div class="loading-animation"><span></span><span></span><span></span></div>
        <div class="loading-text">${query ? 'Recherche' : 'Chargement'}</div>
        <div class="loading-subtext">Scan des derni√®res actualit√©s IA...</div>
      </div>`;

    try {
      const items = await fetchAINews(query);
      allItems = items;
      renderItems(items);
      const now = new Date();
      status.textContent = `Mis √† jour ${now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' })}`;
    } catch (err) {
      console.error(err);
      feed.innerHTML = `
        <div class="error-state">
          <p>‚ö† Impossible de charger les actualit√©s</p>
          <small>${err.message}</small>
        </div>`;
      status.textContent = 'Erreur';
    }

    btn.disabled = false;
  }

  function searchTopic() {
    const q = document.getElementById('searchInput').value.trim();
    if (q) loadNews(q);
  }

  document.getElementById('searchInput').addEventListener('keydown', e => {
    if (e.key === 'Enter') searchTopic();
  });

  loadNews();
  setInterval(() => loadNews(), 10 * 60 * 1000);
</script>
</body>
</html>
